<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <meta name="color-scheme" content="light dark">
  <title>Des mots pour Ã©clairer tes journÃ©es Teddy ðŸ§¸</title>
  <meta name="description" content="Des mots pour Ã©clairer tes journÃ©es Teddy ðŸ§¸" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Cormorant+Garamond:wght@600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f1ea;
      --bg-2:#efe4d7;
      --card:#ffffff;
      --ink:#232220;
      --muted:#5a5652;
      --accent:#6f4e37;
      --accent-2:#a47551;
      --ring:rgba(164,117,81,.30);
      --shadow:0 14px 32px rgba(0,0,0,.08);
      --radius:20px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      -webkit-text-size-adjust:100%;
      text-size-adjust:100%;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
      color:var(--ink);
      background-color: var(--bg);
      background-image:
        radial-gradient(1200px 800px at 85% 0%, var(--bg-2) 0%, transparent 55%),
        radial-gradient(1000px 700px at 0% 100%, #eadfce 0%, transparent 60%),
        conic-gradient(from 160deg at 50% 30%, rgba(164,117,81,.07), rgba(255,255,255,0) 40%),
        radial-gradient(700px 500px at 50% 28%, rgba(255,255,255,.6), rgba(255,255,255,0) 60%);
      background-attachment: fixed, fixed, fixed, fixed;
      display:flex; align-items:center; justify-content:center; padding:18px;
      position:relative; overflow-x:hidden;
    }
    body::before{
      content:""; position:fixed; inset:0; pointer-events:none; z-index:-1;
      background:
        repeating-linear-gradient(0deg, rgba(0,0,0,.015) 0 1px, transparent 1px 2px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.012) 0 1px, transparent 1px 2px);
      mix-blend-mode:multiply; opacity:.25;
    }
    body::after{
      content:""; position:fixed; inset:-10vmax; pointer-events:none; z-index:-1;
      background: radial-gradient(120vmax 80vmax at 50% 50%, transparent 60%, rgba(0,0,0,.06));
    }

    .app{width:100%; max-width:680px}
    .card{
      background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
      padding:26px; border:1px solid #eee6dd; backdrop-filter: blur(4px);
    }

    .title{
      margin:0; text-align:center;
      font-family: "Cormorant Garamond", serif; font-weight:600;
      font-size:clamp(24px,5.6vw,36px); line-height:1.06;
    }
    .subtitle{
      margin:8px 0 2px; text-align:center; color:var(--muted);
      font-size:14px; font-weight:600;
    }

    .tabs{
      display:flex; gap:10px; justify-content:center; flex-wrap:wrap; margin:16px 0 6px;
    }
    .tab{
      border:none; cursor:pointer; background:#f2ebe3; color:var(--accent);
      padding:12px 16px; border-radius:999px; font-weight:800; border:1px solid #e6dccf;
      transition:transform .06s ease;
    }
    .tab:active{ transform:scale(.98) }
    .tab.active{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:#fff; border-color:transparent;
      box-shadow:0 10px 22px rgba(111,78,55,.24)
    }

    .pillbar{display:flex; justify-content:space-between; align-items:center; gap:12px; margin:10px 0 0; font-size:13px; color:var(--muted)}
    .pill{background:#f2ebe3; color:var(--accent); padding:8px 12px; border-radius:999px; font-weight:800; border:1px solid #e6dccf}

    .msg{
      margin:16px 0 12px; padding:26px 28px; border-radius:18px;
      font-size:clamp(19px,3.8vw,22px); line-height:1.55; text-align:center;
      border:1px dashed #e6dccf; background:#fbf8f4; min-height:110px;
      display:flex; align-items:center; justify-content:center;
      position:relative; overflow:hidden;
    }

    .controls{display:flex; gap:14px; margin:16px 0 0; justify-content:center; flex-wrap:wrap}
    button{
      border:none; cursor:pointer; font-weight:900;
      border-radius:14px; padding:14px 18px; min-height:46px;
      background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff;
      box-shadow:0 10px 24px rgba(111,78,55,.25);
    }
    button.secondary{
      background:#f2ebe3; color:var(--accent); box-shadow:none; border:1px solid #e6dccf; font-weight:800;
    }

    .note{margin:10px 0 0; text-align:center; font-size:12px; color:var(--muted)}

    .spark{
      position:absolute; width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at center, #ffd9a1, rgba(255,217,161,0) 70%);
      opacity:0; animation: rise 1200ms ease-out forwards;
    }
    @keyframes rise{
      0%{transform:translateY(8px) scale(.8); opacity:0}
      20%{opacity:.85}
      100%{transform:translateY(-86px) scale(1.25); opacity:0}
    }

    @media (max-width:480px){
      body { padding: 14px; }
      .card { padding: 20px; border-radius:16px; }
      .msg { padding: 22px; min-height:120px }
    }

    @media (prefers-reduced-motion: reduce){
      .spark{ animation: none; display:none }
      .tab, button{ transition: none }
    }

    /* MODE NUIT DORÃ‰ AUTOMATIQUE */
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#181514; --bg-2:#221c1a; --card:#1f1a18;
        --ink:#f3eee9; --muted:#cbbfb7; --accent:#d2a56a; --accent-2:#f0c892;
        --ring:rgba(210,165,106,.35); --shadow:0 16px 36px rgba(0,0,0,.5);
      }
      body{
        background-color: var(--bg);
        background-image:
          radial-gradient(1200px 800px at 85% 0%, rgba(210,165,106,.12) 0%, transparent 55%),
          radial-gradient(1000px 700px at 0% 100%, rgba(210,165,106,.10) 0%, transparent 60%),
          conic-gradient(from 160deg at 50% 30%, rgba(210,165,106,.10), rgba(0,0,0,0) 40%),
          radial-gradient(700px 500px at 50% 28%, rgba(255,255,255,.06), rgba(255,255,255,0) 60%);
      }
      body::before{opacity:.12; mix-blend-mode: normal;}
      body::after{background: radial-gradient(120vmax 80vmax at 50% 50%, transparent 58%, rgba(0,0,0,.25));}
      .card{border-color:#2a2321;}
      .tab{background:#2a2321;border-color:#3a302d;color:var(--accent);}
      .tab.active{color:#12100f;box-shadow:0 10px 22px rgba(0,0,0,.45);}
      .pill{background:#2a2321;border-color:#3a302d;color:var(--accent);}
      .msg{background:#1b1715;border-color:#332a27;}
      button{box-shadow:0 12px 28px rgba(0,0,0,.55);}
      button.secondary{background:#2a2321;border-color:#3a302d;color:var(--accent);}
      .note{color:var(--muted)}
      .spark{background: radial-gradient(circle at center, rgba(255,222,173,.9), rgba(255,222,173,0) 70%);}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="card">
      <h1 class="title">Des mots pour Ã©clairer tes journÃ©es â€” Teddy ðŸ§¸</h1>
      <p class="subtitle">Des messages prÃ©parÃ©s pour toi ðŸ¤Ž</p>

      <div class="tabs">
        <button class="tab active" data-cat="amour">ðŸ’œ Amour</button>
        <button class="tab" data-cat="motivation">ðŸ’¼ Motivation</button>
        <button class="tab" data-cat="bible">ðŸ“– Foi & Inspiration</button>
      </div>

      <div class="pillbar">
        <span id="count" class="pill">0 / 30 (catÃ©gorie)</span>
        <span id="left">Tirages restants aujourdâ€™hui : 3</span>
      </div>

      <div id="message" class="msg" aria-live="polite">PrÃªte ? Appuie sur Â« Tirer un message Â» âœ¨</div>

      <div class="controls">
        <button id="draw">Tirer un message</button>
        <button id="share" class="secondary">Partager</button>
      </div>

      <p class="note" id="finalNote" aria-live="polite"></p>
      <p class="note">Limite : 3 messages par jour (rÃ©initialisation automatique Ã  minuit) â€¢ Pas de rÃ©pÃ©tition avant dâ€™avoir tout dÃ©couvert dans la catÃ©gorie.</p>
    </div>
  </div>

  <script>
    const MAX_DAILY = 3;

    const MESSAGES_AMOUR = [
      "Ton amour nâ€™a pas besoin de mots pour se faire comprendre, il se ressent jusque dans le silence.",
      "Depuis que tu existes dans ma vie, tout ce qui Ã©tait flou a trouvÃ© un sens.",
      "Tu es ce genre de prÃ©sence qui calme sans parler, qui rassure sans promettre.",
      "Quand nos regards se croisent, câ€™est comme si le temps sâ€™accordait une pause.",
      "Je ne tâ€™aime pas seulement pour ce que tu es, mais pour ce que je deviens Ã  tes cÃ´tÃ©s."
    ];

    const MESSAGES_MOTIVATION = [
      "Tu nâ€™as pas choisi la facilitÃ©, tu as choisi la croissance â€” et câ€™est ce qui te rend unique.",
      "Ton courage dâ€™essayer vaut bien plus que la peur dâ€™Ã©chouer.",
      "Tu ne cherches pas juste un stage, tu construis les fondations de ta vision.",
      "Lâ€™audace dâ€™aujourdâ€™hui sera le souvenir fier de demain.",
      "Rien nâ€™est plus fort quâ€™une femme qui sait pourquoi elle se lÃ¨ve chaque matin."
    ];

    const MESSAGES_BIBLE = [
      "Â« Je puis tout par celui qui me fortifie. Â» â€” Philippiens 4:13",
      "Â« Car je connais les projets que jâ€™ai formÃ©s pour vousâ€¦ Â» â€” JÃ©rÃ©mie 29:11",
      "Â« Lâ€™Ã‰ternel combattra pour vous ; et vous, gardez le silence. Â» â€” Exode 14:14",
      "Â« Le Seigneur est ma lumiÃ¨re et mon salut ; de qui aurais-je peur ? Â» â€” Psaume 27:1",
      "Â« Confie-toi en lâ€™Ã‰ternel de tout ton cÅ“urâ€¦ Â» â€” Proverbes 3:5"
    ];

    const CATS = { amour: MESSAGES_AMOUR, motivation: MESSAGES_MOTIVATION, bible: MESSAGES_BIBLE };
    const STORAGE = { DAILY:"teddy_daily_v2", SEEN:"teddy_seen_v2" };
    const els = {
      tabs: document.querySelectorAll(".tab"),
      msg: document.getElementById("message"),
      count: document.getElementById("count"),
      left: document.getElementById("left"),
      final: document.getElementById("finalNote"),
      draw: document.getElementById("draw"),
      share: document.getElementById("share")
    };
    let currentCat = "amour";

    function todayLocal(){
      const d=new Date();return`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;
    }
    function loadDaily(){
      const raw=localStorage.getItem(STORAGE.DAILY);const t=todayLocal();
      if(!raw) return {date:t,count:0};
      const o=JSON.parse(raw);
      return o.date===t?o:{date:t,count:0};
    }
    function saveDaily(o){localStorage.setItem(STORAGE.DAILY,JSON.stringify(o));}
    function incDaily(){const o=loadDaily();o.count++;saveDaily(o);return o;}
    function remainingToday(){const o=loadDaily();return Math.max(0,MAX_DAILY-(o.count||0));}
    function loadSeen(){try{return JSON.parse(localStorage.getItem(STORAGE.SEEN))||{amour:[],motivation:[],bible:[]}}catch{return{amour:[],motivation:[],bible:[]}}}
    function saveSeen(s){localStorage.setItem(STORAGE.SEEN,JSON.stringify(s));}
    function randomUnseenIndex(cat){const arr=CATS[cat];const seen=new Set(loadSeen()[cat]);if(seen.size>=arr.length){const s=loadSeen();s[cat]=[];saveSeen(s);return Math.floor(Math.random()*arr.length);}let i;do{i=Math.floor(Math.random()*arr.length);}while(seen.has(i));return i;}
    function markSeen(cat,i){const s=loadSeen();if(!s[cat].includes(i))s[cat].push(i);saveSeen(s);}
    function animateSparks(c){for(let i=0;i<8;i++){const s=document.createElement("div");s.className="spark";s.style.left=12+Math.random()*76+"%";s.style.animationDelay=i*80+"ms";c.appendChild(s);setTimeout(()=>s.remove(),1300);}}
    function updateCounters(){const s=loadSeen();const total=CATS[currentCat].length;const done=(s[currentCat]||[]).length;els.count.textContent=`${done} / ${total} (catÃ©gorie)`;els.left.textContent=`Tirages restants aujourdâ€™hui : ${remainingToday()}`;}
    function setCategory(c){currentCat=c;els.tabs.forEach(t=>t.classList.toggle("active",t.dataset.cat===c));els.msg.textContent="PrÃªte ? Appuie sur Â« Tirer un message Â» âœ¨";els.final.textContent="";updateCounters();}
    function drawMessage(){if(remainingToday()<=0){els.final.textContent="ðŸŒ¸ Tu as dÃ©jÃ  tirÃ© tes messages dâ€™aujourdâ€™huiâ€¦ prochain tirage dÃ¨s minuit ðŸ¤Ž";return;}const i=randomUnseenIndex(currentCat);const text=CATS[currentCat][i];markSeen(currentCat,i);els.msg.textContent=text;animateSparks(els.msg);incDaily();updateCounters();}
    function shareCurrent(){const text=els.msg.textContent?.trim()||"Des mots pour Ã©clairer tes journÃ©es â€” Teddy ðŸ§¸";if(navigator.share){navigator.share({title:"Des mots â€” Teddy ðŸ§¸",text,}).catch(()=>{});}else{navigator.clipboard?.writeText(text).then(()=>{els.final.textContent="Message copiÃ© âœ…";});}}
    document.querySelectorAll(".tab").forEach(t=>t.addEventListener("click",()=>setCategory(t.dataset.cat)));
    els.draw.addEventListener("click",drawMessage);
    els.share.addEventListener("click",shareCurrent);
    setCategory("amour");updateCounters();
    setInterval(()=>{const o=loadDaily();const t=todayLocal();if(o.date!==t){saveDaily({date:t,count:0});updateCounters();}},60000);
  </script>
</body>
</html>

